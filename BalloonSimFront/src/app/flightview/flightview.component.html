<section class="content-card">

    <div class="card-header">
        <h2 id="flightname"></h2>
        <button *ngIf="routes && routes.length > 1" type="button" class="green normal" (click)="reviewFlight()"><fa-icon [icon]="eyeIcon"></fa-icon> Ver en el simulador</button>
    </div>
    <hr>

    <h2>Tracking:</h2>
    <p>Ruta seguida por el aerostato durante el vuelo.</p>
    <div class="params-map">
        <div class="map-container">
            <div class="map-frame">
                <div id="map"></div>
            </div>
        </div>
    </div>
    <hr>

    <h2>Datos del vuelo:</h2>
    <div id="flight-datatables">
        <table class="contents_table">
            <thead>
                <tr>
                    <th>Despegue en:</th>
                    <th>Fecha del vuelo:</th>
                    <th>Duración del vuelo:</th>
                    <th>Distancia recorrida:</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf="flight && distance">
                    <td>{{flight.takeoff}}.</td>
                    <td>{{flight.date}}</td>
                    <td>{{flight.duration}}</td>
                    <td>{{distanceToString(distance)}}</td>
                </tr>
            </tbody>
        </table>
        <table class="contents_table">
            <thead>
                <tr>
                    <th>Velocidad máxima:</th>
                    <th>Velocidad media:</th>
                    <th>V. ascensión máxima:</th>
                    <th>V. descenso máxima:</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf="flight && distance">
                    <td>{{(toKmPerHour(maxSpeed)).toFixed(2)}} km/h / {{toKnots(toKmPerHour(maxSpeed)).toFixed(1)}} nudos.</td>
                    <td>{{(toKmPerHour(distance / flight.seconds)).toFixed(2)}} km/h / {{toKnots(toKmPerHour(distance / flight.seconds)).toFixed(1)}} nudos.</td>
                    <td>{{maxSpeedY.toFixed(2)}} m/s</td>
                    <td>{{minSpeedY.toFixed(2)}} m/s</td>
                </tr>
            </tbody>
        </table>
        <table class="contents_table">
            <thead>
                <tr>
                    <th>Altitud máxima:</th>
                    <th>Altitud mínima:</th>
                    <th>Altitud media:</th>
                    <th>Altitud despegue:</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf="flight && distance">
                    <td>{{maxAltitude.toFixed(2)}} m / {{(toFeet(maxAltitude)).toFixed(0)}} feet</td>
                    <td>{{minAltitude.toFixed(2)}} m / {{(toFeet(minAltitude)).toFixed(0)}} feet</td>
                    <td>{{avgAltitude.toFixed(2)}} m / {{(toFeet(avgAltitude)).toFixed(0)}} feet</td>
                    <td>{{takeoffAltitude.toFixed(2)}} m / {{(toFeet(takeoffAltitude)).toFixed(0)}} feet</td>
                </tr>
            </tbody>
        </table>
        <table class="contents_table">
            <thead>
                <tr>
                    <th>Desplazamiento en línea recta:</th>
                    <th>Combustible restante:</th>
                    <th>Temperatura en tierra:</th>
                    <th>Presión s.n.m.</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf="flight && distance">
                    <td>{{distanceToString(straightLineDistance)}}</td>
                    <td>{{remainingFuel.toFixed(2)}} %</td>
                    <td *ngIf="weather">{{weather.temperature.toFixed(2)}} °C</td>
                    <td *ngIf="weather">{{weather.pressure.toFixed(0)}} hPa</td>
                </tr>
            </tbody>
        </table>
    </div>
    <hr>

    <h2>Gráfico del vuelo:</h2>
    <canvas id="graphicAltitude"></canvas>
    <hr>

    <h2>Vientos:</h2>
    <table class="contents_table">
        <thead>
            <tr>
                <th>Altitud (s. n. m.)</th>
                <th>Dirección</th>
                <th>Velocidad</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let wind of windList">
                <td>{{wind.altitude}} m / {{wind.altitudeFeet}} feet</td>
                <td>{{wind.direction.toFixed(2)}}°</td>
                <td>{{wind.speedKMH}} km/h / {{toKnots(wind.speed).toFixed(1)}} nudos.</td>
                <td>
                    <div class="actions">
                        <input #colorPicker title="Cambia el color del viento" *ngIf="wind.color" type="color" class="colorpicker" value={{wind.color}} (change)="windsMap.changeWindColor(wind, colorPicker.value)">
                        <a #aEye (click)="windsMap.changeWindVisibility(wind, aEye.firstElementChild)" title="Mostrar/ocultar viento en el mapa">
                            <fa-icon [class.pressed]="!wind.seeOnMap" [icon]="eyeIcon"></fa-icon>
                        </a>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="params-map">
        <div class="map-container">
            <div class="map-frame">
                <div id="mapWinds"></div>
            </div>
        </div>
    </div>
    <hr>

    <section class="exports">
        <button (click)="exportSettings()"><fa-icon [icon]="exportIcon"></fa-icon> Exportar ajustes</button>
    </section>
</section>